<!DOCTYPE html>
<html>
    <head>
        <title>Sensores</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="static/css/base.css">
    </head>
    <header>
        <nav class="navbar">
            <ul>
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/log">Historico</a>
                </li>
                <li>
                    <a href="/sensores">Sensores</a>
                </li>
            </ul>
        </nav>
    </header>
    <body>
        <div class="main-container">
            <!--Lumiosidad-->
            <div class="luz">
                <h1>Luminosidad</h1>
                <div class="content">
                    <p>Valor Actual: </p>
                    <span id="luz" class="valor">20%</span>
                    <p>Actualizar valor: </p>
                    <form action="javascript:void(0);" id="form-luz">
                        <input type="text" id="luz-input" class="input-range">
                    </form>
                    <p>%</p>

                </div>
                <h3>Persianas</h3>
                <div class="content">
                    ACTUALIZAR
                </div>
            </div>

            <!--Temperatura-->
            <div class="temperatura">
                <h1>Temperatura</h1>
                <div class="content">
                    <p>Valor Actual: </p>
                    <span id="temperatura" class="valor">20ºC</span>
                    <p>Actualizar valor: </p>

                    <form action="javascript:void(0);" id="form-temperatura">
                        <input type="text" id="temp-input" class="input-range">
                    </form>
                    <p>ºC</p>
                </div>  
                
                <h3>Aire Acondicionado</h3>
                <div class="content">
                    ACTUALIZAR
                </div>
            </div>

        </div>
    </body>
    <script>
		var serviceURL = document.URL;

        var spanLuz = document.getElementById("luz");
        var spanTemperatura = document.getElementById("temperatura");

        var inputLuz = document.getElementById("luz-input");
        var inputTemperatura = document.getElementById("temp-input");

        var formLuz = document.getElementById("form-luz");
        var formTemperatura = document.getElementById("form-temperatura");

        function submitForm(form, input, span, unidad){
            var url = serviceURL;
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function(){
                if(httpRequest.readyState === 4){
                    span.innerHTML = input.value + unidad;
                }
            };
            httpRequest.open("GET", url, true)
            httpRequest.send(null)
        }

        formLuz.onsubmit = () => {  
            submitForm(formLuz, inputLuz, spanLuz, "%");
        }
        
        formTemperatura.onsubmit = () => {
            submitForm(formTemperatura, inputTemperatura, spanTemperatura, "ºC"); 
        }
    </script>
    <!-- <script type="text/javascript" src="static/js/updateSensores.js" ></script> -->
</html>